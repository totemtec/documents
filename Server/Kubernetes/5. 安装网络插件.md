# Calico å®‰è£…

å‚è€ƒæ–‡æ¡£

> https://docs.tigera.io/calico/latest/getting-started/kubernetes/quickstart

### 1. å®‰è£… Calico æ“ä½œå™¨ å’Œ å®šåˆ¶èµ„æºå®šä¹‰

```bash
# å¦‚æœä¸‹è½½ä¸ä¸‹æ¥ï¼Œå°±æ‰‹åŠ¨ä¸‹è½½ã€‚å®‰è£…å‡ºé”™å¯ä»¥é‡å¯è¯•è¯•
kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.28.0/manifests/tigera-operator.yaml
```

### 2. åˆ›å»ºå®šåˆ¶åŒ–èµ„æºæ¥å®‰è£… Calico

```bash
# ä¸‹è½½é…ç½®æ–‡ä»¶
wget https://raw.githubusercontent.com/projectcalico/calico/v3.28.0/manifests/custom-resources.yaml

# è¿™é‡Œé¢è¦ä¿®æ”¹ IP åœ°å€ï¼Œä¸åˆ›å»ºé›†ç¾¤æ—¶é…ç½®çš„ --pod-network-cidr=10.244.0.0/16 ä¸€è‡´
kubectl create -f custom-resources.yaml
```

### 3. ç¡®è®¤æ‰€æœ‰ pod éƒ½æ˜¯ Running çŠ¶æ€

å®‰è£…å®Œåéœ€è¦ç­‰æ¯”è¾ƒä¹…æ‰èƒ½ç¡®è®¤ï¼Œå¦‚æœçŠ¶æ€ä¸å¯¹ï¼Œå¯ä»¥æ‰‹åŠ¨ä¸‹è½½ calico/cni é•œåƒ

ğŸ”´ æ¨èå…ˆå®‰è£…ç½‘ç»œæ’ä»¶ï¼Œå†åŠ å…¥é›†ç¾¤ï¼Œå› ä¸ºå¤šèŠ‚ç‚¹ä¸‹è½½é•œåƒä¼šæ¯”è¾ƒæ…¢

```bash
# å¦‚æœå®‰è£…æ…¢ï¼Œå°±è¦æ‰‹åŠ¨ä¸‹è½½é•œåƒ
docker pull calico/cni:latest

# æŸ¥çœ‹ podï¼Œéƒ½æ˜¯ Running å°±å¯¹äº†
kubectl get pods -n calico-system

# æŸ¥çœ‹ nodeï¼Œéƒ½æ˜¯ Ready å°±å¯¹äº†
kubectl get node
```

### 4. åˆ é™¤æ§åˆ¶å¹³é¢çš„æ±¡æŸ“ç‚¹

```bash
kubectl taint nodes --all node-role.kubernetes.io/control-plane-
```

è¾“å‡ºå¦‚ä¸‹

```
node/k8s-master untainted
taint "node-role.kubernetes.io/control-plane" not found
taint "node-role.kubernetes.io/control-plane" not found
```

### 5. ç¡®è®¤

```bash
kubectl get nodes -o wide
```

è¾“å‡ºå¦‚ä¸‹

```
NAME              STATUS   ROLES    AGE   VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION    CONTAINER-RUNTIME
<your-hostname>   Ready    master   52m   v1.12.2   10.128.0.28   <none>        Ubuntu 18.04.1 LTS   4.15.0-1023-gcp   docker://18.6.1
```